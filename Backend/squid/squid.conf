# ACLs básicas
acl manager proto cache_object

# Rede interna
acl localnet src 10.0.0.0/8
acl localnet src 172.16.0.0/12
acl localnet src 192.168.0.0/16
acl localnet src fc00::/7
acl localnet src fe80::/10

# Lista de sites bloqueados
acl blocked_sites dstdomain "/etc/squid/blocked_sites.txt"

# ========================
# Configuração da Página de Bloqueio
# ========================

# Página de erro personalizada para sites bloqueados
error_directory /usr/share/squid/errors/pt-br
deny_info ERR_ACCESS_DENIED blocked_sites

# ========================
# Regras de Acesso (http_access)
# ========================

# Bloquear sites da lista de bloqueio
http_access deny blocked_sites

# Permitir todos os outros acessos
http_access allow all

# ========================
# Configurações Gerais
# ========================

# Porta de escuta
http_port 3128

# Diretório de coredump
coredump_dir /var/spool/squid

# Configuração de cache
refresh_pattern ^ftp:           1440    20%     10080
refresh_pattern ^gopher:        1440    0%      1440
refresh_pattern -i (/cgi-bin/|\?) 0     0%      0
refresh_pattern .               0       20%     4320

# Configurações de conexão
forward_max_tries 25
follow_x_forwarded_for allow localhost
forwarded_for on
dns_v4_first on

# Configurações de performance
cache_mem 256 MB
maximum_object_size 128 MB
cache_dir ufs /var/spool/squid 1000 16 256

